<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Leaflet Layers Tree Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet-src.js" crossorigin=""></script>
    <!--script src="../../Leaflet/dist/leaflet-src.js" crossorigin=""></script-->

    <style type="text/css">
        html, body { width: 100%; height: 100%; margin: 0; }
        #map { width: 100%; height: 100%; }
    </style>
</head>

<body>
    <div id="map"></div>
    <link rel="stylesheet" href="../L.Control.Layers.Tree.css" crossorigin=""/>
    <script src="../L.Control.Layers.Tree.js"></script>

    <script type="text/javascript">
        var center = [40, 0];

        var osm = L.tileLayer(
            '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
            {attribution: '© OpenStreetMap contributors'}
        );

        var osmBw = L.tileLayer(
            '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',
            {attribution: '© OpenStreetMap contributors'}
        );

        var humanitarian = L.tileLayer(
            'http://tile-{s}.openstreetmap.fr/hot/{z}/{x}/{y}.png',
            {attribution: '© OpenStreetMap contributors. Tiles courtesy of Humanitarian OpenStreetMap Team'}
        );

        var thunderAttr = {attribution: '© OpenStreetMap contributors. Tiles courtesy of Andy Allan'}
        var transport = L.tileLayer(
            '//{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png',
            thunderAttr
        );

        var cycle = L.tileLayer(
            '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',
            thunderAttr
        );

        var andalucia = L.layerGroup([
            L.marker([36.722, -4.432]).bindPopup('Malaga'),
            L.marker([37.375, -5.955]).bindPopup('Sevilla'),
        ]);


        var spain = L.layerGroup([
            L.marker([40.377, -3.580]).bindPopup('Madrid'),
            L.marker([41.396, 2.173]).bindPopup('Barcelona'),
            andalucia,
        ]);
        var france = L.layerGroup ([
            L.marker([48.858, 2.347]).bindPopup('Paris')
        ]);

        var map = L.map('map', {
            layers: [cycle],
            center: center,
            zoom: 5
        });

        var baseLayers = {
            'OpenStreeMap': osm,
            'OpenStreeMap B&W': osmBw,
            'Humanitarian this is muchlonger than expected': humanitarian,
            'Transport': transport,
            'OSM': osm,
            'Cycle': cycle,
        };

        var overlays = {
            'Spain': spain,
            'Andalucía': andalucia,
            'España': spain,
            'France': france,
            'Francia': france,
        }

        var baseTree = {
            label: 'BaseLayers',
            noShow: true,
            children: [
                {label: '<label onclick="lay.collapse()" tabindex="0">Close</label>'},
                {
                    label: 'OpenStreeMap',
                    name: 'pues otra cosa, <b>mariposa</b>',
                    layer: osm,
                    children: [
                        {label: 'B&W', layer: osmBw},
                    ]
                },
                {
                    label: 'Thunder',
                    children: [
                        {label: 'Cycle', layer: cycle},
                        {label: 'Transport', layer: transport},
                        {label: 'Mas', children: [
                            {label: 'Humanitarian', layer: humanitarian},
                        ]}
                    ]
                },
                {label: 'Humanitarian', layer: humanitarian},
            ]
        };

        var overlaysTree = {
            label: 'Overlays',
            noShoe: false,
            children: [
                {
                    label: 'Spain',
                    layer: spain,
                    children: [
                        {label: 'Andalucía', layer: andalucia}
                    ]
                },
                {label: 'France', layer: france},
            ]
        }


        L.control.layers(baseLayers, overlays, {position: 'topleft'}).addTo(map);
        var lay = L.control.layers.tree(baseTree, overlaysTree,
            {
                collapsed: false,
                namedToggle: true,
                selectorBack: false,
                closedSymbol: '&#8862; &#x1f5c0;',
                openedSymbol: '&#8863; &#x1f5c1;',
                spaceSymbol: ' ',
                collapseAll: 'Collapse all',
                expandAll: 'Expand all',
            });

        lay.addTo(map).collapseTree().expandSelected();
        //setTimeout(function(){ lay.collapseTree(); }, 5000);
        //setTimeout(function(){ lay.expandSelected(); }, 10000);
        //setTimeout(function(){ lay.expandTree(); }, 10000);

    </script>
</body>
</html>
